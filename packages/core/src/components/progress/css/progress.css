:host {
  position: relative;
  transition: all ease-in 0.05s;
  display: block;
}

:host([shape='Circular']) {
  svg {
    transform: rotate3d(0, 0, 1, -90deg);
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
    vertical-align: top;

    circle {
      stroke: currentColor;
    }
  }
  .br-progress-circular-track {
    stroke: currentColor;
    color: color-mix(in srgb, var(--progress-track-color) 10%, transparent);
  }
  .br-progress-circular-bar {
    stroke: currentColor;
    color: var(--progress-color);
  }
}

:host([shape='Linear']) {
  .br-progress-track {
    height: var(--progress-stroke);
    border-radius: var(--progress-stroke);
    background-color: color-mix(in srgb, var(--progress-track-color) 10%, transparent);
  }
  .br-progress-bar {
    height: var(--progress-stroke);
    border-radius: var(--progress-stroke);
    background-color: var(--progress-color);
  }
}

:host([theme='Light']) {
  --progress-track-color: var(--color-black);
}

:host([theme='Light'][color-type='Primary']) {
  --progress-color: var(--color-primary-500);
  --progress-track-color: var(--color-black);
}

:host([theme='Light'][color-type='Constructive']) {
  --progress-color: var(--color-constructive-500);
  --progress-track-color: var(--color-black);
}

:host([theme='Light'][color-type='Destructive']) {
  --progress-color: var(--color-destructive-500);
  --progress-track-color: var(--color-black);
}

:host([theme='Light'][color-type='Warning']) {
  --progress-color: var(--color-warning-500);
  --progress-track-color: var(--color-black);
}

:host([theme='Light'][color-type='Neutral']) {
  --progress-color: var(--color-neutral-500);
  --progress-track-color: var(--color-black);
}

:host([theme='Dark']) {
  --progress-track-color: var(--color-black);
}

:host([theme='Dark'][shape='Circular']) {
  .br-progress-circular-track {
    color: color-mix(in srgb, var(--progress-track-color) 30%, transparent);
  }
}

:host([theme='Dark'][shape='Linear']) {
  .br-progress-track {
    background-color: color-mix(in srgb, var(--progress-track-color) 30%, transparent);
  }
}

:host([theme='Dark'][color-type='Primary']) {
  --progress-color: var(--color-primary-300);
  --progress-track-color: var(--color-black);
}

:host([theme='Dark'][color-type='Constructive']) {
  --progress-color: var(--color-constructive-400);
  --progress-track-color: var(--color-black);
}

:host([theme='Dark'][color-type='Destructive']) {
  --progress-color: var(--color-destructive-300);
  --progress-track-color: var(--color-black);
}

:host([theme='Dark'][color-type='Warning']) {
  --progress-color: var(--color-warning-400);
  --progress-track-color: var(--color-black);
}

:host([theme='Dark'][color-type='Neutral']) {
  --progress-color: var(--color-neutral-300);
  --progress-track-color: var(--color-black);
}

@keyframes rotate-progress {
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(180deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes rotate-progress-value {
  0% {
    stroke-dashoffset: calc(var(--progress-stroke) * 9.465);
  }
  25% {
    stroke-dashoffset: calc(var(--progress-stroke) * 9.465 * 1.5);
  }
  50% {
    stroke-dashoffset: calc(var(--progress-stroke) * 9.465 * 1);
  }
  75% {
    stroke-dashoffset: calc(var(--progress-stroke) * 9.465 * 1.5);
  }
  100% {
    stroke-dashoffset: calc(var(--progress-stroke) * 9.465);
  }
}

@keyframes width-progress {
  0% {
    width: 0%;
    left: 0%;
  }
  50% {
    width: 75%;
    left: 25%;
  }
  100% {
    width: 0%;
    left: 100%;
  }
}

:host([shape='Circular'].br-progress-bar-indeterminate) {
  animation: rotate-progress calc(var(--transition-long-duration) * 3) infinite forwards;
  .br-progress-circular-bar {
    animation: rotate-progress-value calc(var(--transition-long-duration) * 6) infinite forwards;
  }
}

:host([shape='Linear'].br-progress-bar-indeterminate) {
  .br-progress-bar {
    animation: width-progress 1s forwards infinite;
  }
}

:host([shape='Linear']) {
  display: flex;
  width: 100%;
  .br-progress-track {
    position: relative;
    width: 100%;
  }

  .br-progress-bar {
    position: absolute;
    left: 0;
    bottom: 0;
  }
}

:host {
  .br-progress-circular-track {
    fill: transparent;
  }
  .br-progress-circular-bar {
    fill: transparent;
  }
}

:host([shape='Circular']) {
  width: calc(var(--progress-circular-radius) * 2);
  height: calc(var(--progress-circular-radius) * 2);
  stroke-linecap: round;
}

:host([shape='Linear']) {
  height: var(--progress-stroke);
}

:host([size='Small']) {
  --progress-circular-radius: calc(var(--size-unit) * 2);
  --progress-stroke: calc(var(--size-unit) * 0.5);
}

:host([size='Normal']) {
  --progress-circular-radius: calc(var(--size-unit) * 3);
  --progress-stroke: var(--size-unit);
}

:host([size='Large']) {
  --progress-circular-radius: calc(var(--size-unit) * 6);
  --progress-stroke: calc(var(--size-unit) * 2);
}
